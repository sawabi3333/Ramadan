<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ø±Ø­Ù„Ø© Ø±Ù…Ø¶Ø§Ù† Ù…Ø¹ ÙˆÙ„Ø§Ø¡ ğŸ’œ</title>

<link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap" rel="stylesheet">

<style>
*{margin:0;padding:0;box-sizing:border-box;font-family:'Cairo',sans-serif}

body{
background: radial-gradient(circle at top,#1a2a3a,#0b1622);
min-height:100vh;
color:#fff;
display:flex;
align-items:center;
justify-content:center;
overflow:hidden;
}

/* ÙƒØ§Ø±Øª */
.card{
background:rgba(255,255,255,0.08);
backdrop-filter:blur(14px);
padding:20px;
border-radius:25px;
text-align:center;
width:95%;
max-width:420px;
box-shadow:0 20px 50px rgba(0,0,0,.7);
}

/* Ø®Ø±ÙŠØ·Ø© */
.map{
display:flex;
flex-wrap:wrap;
gap:12px;
justify-content:center;
margin-top:15px;
max-height:260px;
overflow-y:auto;
padding:5px;
}

.stage{
width:65px;
height:65px;
border-radius:18px;
display:flex;
align-items:center;
justify-content:center;
font-size:24px;
cursor:pointer;
background:linear-gradient(#b46bff,#7a2bff);
box-shadow:0 6px 0 #4b0fb3;
transition:.2s;
position:relative;
}

.stage.locked{
background:#444;
box-shadow:none;
cursor:not-allowed;
opacity:.5;
}

/* Ù†Ø¬ÙˆÙ… Ø§Ù„Ù…Ø±Ø­Ù„Ø© */
.stars{
position:absolute;
bottom:-10px;
font-size:12px;
width:100%;
text-align:center;
}

/* Ø´Ø±ÙŠØ· ØªÙ‚Ø¯Ù… */
.progress{
height:10px;
background:#333;
border-radius:10px;
margin:12px 0;
overflow:hidden;
}
.progress div{
height:100%;
background:linear-gradient(90deg,#b46bff,#ffd700);
transition:.4s;
}

/* Ø²Ø± */
button{
background:linear-gradient(#ffcc70,#ff9f00);
border:none;
padding:10px 16px;
border-radius:14px;
cursor:pointer;
margin-top:10px;
font-weight:bold;
}

/* Ù…Ø¤Ø«Ø±Ø§Øª */
.effects span{
position:fixed;
font-size:22px;
animation:fall 3s linear forwards;
}
@keyframes fall{
from{transform:translateY(-50px);opacity:1}
to{transform:translateY(100vh);opacity:0}
}
</style>
</head>

<body>

<div class="card">

<h2>ğŸŒ™ Ø±Ø­Ù„Ø© Ø±Ù…Ø¶Ø§Ù† Ù…Ø¹ ÙˆÙ„Ø§Ø¡ ğŸ’œ</h2>

<div class="progress">
<div id="bar"></div>
</div>

<p>Ø§Ù„Ù†Ù‚Ø§Ø·: <span id="points">0</span></p>

<div class="map" id="map"></div>

<div id="questionBox"></div>

</div>

<div class="effects" id="effects"></div>

<audio id="winSound">
<source src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_c8c8a73467.mp3" type="audio/mpeg">
</audio>

<script>
const stages = ["ğŸŒ™","ğŸ•Œ","ğŸ®","ğŸ“–","âœ¨","ğŸ","ğŸŒ™","ğŸ•Œ","ğŸ®","ğŸ“–"];
const questions = [
["ÙÙŠ Ø£ÙŠ Ø´Ù‡Ø± Ù†Ø²Ù„ Ø§Ù„Ù‚Ø±Ø¢Ù†ØŸ","Ø±Ù…Ø¶Ø§Ù†"],
["ÙƒÙ… Ø¹Ø¯Ø¯ Ø§Ù„ØµÙ„ÙˆØ§Øª Ø§Ù„Ù…ÙØ±ÙˆØ¶Ø©ØŸ","5"],
["Ù…Ø§ Ø§Ù„Ù„ÙŠÙ„Ø© Ø®ÙŠØ± Ù…Ù† Ø£Ù„Ù Ø´Ù‡Ø±ØŸ","Ù„ÙŠÙ„Ø© Ø§Ù„Ù‚Ø¯Ø±"],
["ÙƒÙ… Ø¹Ø¯Ø¯ Ø£ÙŠØ§Ù… Ø±Ù…Ø¶Ø§Ù† ØºØ§Ù„Ø¨Ù‹Ø§ØŸ","30"],
["Ù…Ø§ Ø£ÙˆÙ„ Ù…Ø§ Ù†Ø²Ù„ Ù…Ù† Ø§Ù„Ù‚Ø±Ø¢Ù†ØŸ","Ø§Ù‚Ø±Ø£"],
["Ù…Ø§Ø°Ø§ ÙŠØ£ØªÙŠ Ø¨Ø¹Ø¯ Ø±Ù…Ø¶Ø§Ù†ØŸ","Ø§Ù„Ø¹ÙŠØ¯"],
["ÙƒÙ… Ø¹Ø¯Ø¯ Ø£Ø±ÙƒØ§Ù† Ø§Ù„Ø¥Ø³Ù„Ø§Ù…ØŸ","5"],
["Ù…Ø§ Ø§Ø³Ù… Ø§Ù„Ø³ÙˆØ±Ø© Ø§Ù„ØªÙŠ Ø°ÙƒØ± ÙÙŠÙ‡Ø§ Ø±Ù…Ø¶Ø§Ù†ØŸ","Ø§Ù„Ø¨Ù‚Ø±Ø©"],
["Ù…Ø§ Ø§Ù„ØµÙ„Ø§Ø© Ø§Ù„ØªÙŠ ØªØ¤Ø¯Ù‰ Ù„ÙŠÙ„Ù‹Ø§ ÙÙŠ Ø±Ù…Ø¶Ø§Ù†ØŸ","Ø§Ù„ØªØ±Ø§ÙˆÙŠØ­"],
["ÙƒÙ… Ù…Ø±Ø© ÙŠØµÙˆÙ… Ø§Ù„Ù…Ø³Ù„Ù… ÙÙŠ Ø§Ù„Ø³Ù†Ø©ØŸ","Ø±Ù…Ø¶Ø§Ù†"]
];

let unlocked = Number(localStorage.getItem("ramadanUnlocked")) || 0;
let points = Number(localStorage.getItem("ramadanPoints")) || 0;
let starsData = JSON.parse(localStorage.getItem("ramadanStars") || "[]");

/* Ù…Ø¤Ø«Ø±Ø§Øª */
function showEffect(){
const box=document.getElementById("effects");
for(let i=0;i<25;i++){
const s=document.createElement("span");
s.innerText=Math.random()>0.5?"ğŸ’œ":"ğŸŒ™";
s.style.left=Math.random()*100+"vw";
box.appendChild(s);
setTimeout(()=>s.remove(),3000);
}
}

/* Ø±Ø³Ù… Ø§Ù„Ø®Ø±ÙŠØ·Ø© */
function renderMap(){
const map=document.getElementById("map");
map.innerHTML="";

stages.forEach((icon,i)=>{
const s=document.createElement("div");
s.className="stage"+(i>unlocked?" locked":"");
s.innerText=icon;

if(i<=unlocked) s.onclick=()=>startStage(i);

/* Ù†Ø¬ÙˆÙ… */
const starDiv=document.createElement("div");
starDiv.className="stars";
starDiv.innerText="â­".repeat(starsData[i]||0);
s.appendChild(starDiv);

map.appendChild(s);
});

document.getElementById("points").innerText=points;
updateProgress();
}

/* Ø¨Ø¯Ø¡ Ù…Ø±Ø­Ù„Ø© */
function startStage(i){
const q=questions[i];

document.getElementById("questionBox").innerHTML=`
<p style="margin-top:15px">${q[0]}</p>
<input id="ans" style="padding:8px;border-radius:10px;border:none;width:90%;margin-top:8px">
<br>
<button onclick="checkAnswer(${i})">ØªØ£ÙƒÙŠØ¯</button>
`;
}

/* ØªØ­Ù‚Ù‚ Ø§Ù„Ø¥Ø¬Ø§Ø¨Ø© */
function checkAnswer(i){
const val=document.getElementById("ans").value.trim();

if(val===questions[i][1]){
points+=10;

/* Ù†Ø¬ÙˆÙ… Ø¹Ø´ÙˆØ§Ø¦ÙŠØ© Ø¬Ù…ÙŠÙ„Ø© */
const stars = Math.floor(Math.random()*3)+1;
starsData[i]=stars;

document.getElementById("winSound").play();
showEffect();

if(i===unlocked) unlocked++;

saveData();
renderMap();

if(unlocked===stages.length) winGame();

document.getElementById("questionBox").innerHTML="";
}else{
alert("Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø© âŒ");
}
}

/* Ø­ÙØ¸ */
function saveData(){
localStorage.setItem("ramadanUnlocked",unlocked);
localStorage.setItem("ramadanPoints",points);
localStorage.setItem("ramadanStars",JSON.stringify(starsData));
}

/* ØªÙ‚Ø¯Ù… */
function updateProgress(){
const percent=(unlocked/stages.length)*100;
document.getElementById("bar").style.width=percent+"%";
}

/* Ù†Ù‡Ø§ÙŠØ© */
function winGame(){
document.getElementById("questionBox").innerHTML=`
<h3>ğŸ‰ Ù…Ø¨Ø±ÙˆÙƒ ÙŠØ§ ÙˆÙ„Ø§Ø¡ ğŸ’œ</h3>
<p>Ø£Ù†Ù‡ÙŠØªÙŠ Ø±Ø­Ù„Ø© Ø±Ù…Ø¶Ø§Ù† Ø¨Ø§Ù„ÙƒØ§Ù…Ù„</p>
<p>Ù…Ø¬Ù…ÙˆØ¹ Ø§Ù„Ù†Ù‚Ø§Ø·: ${points}</p>
<button onclick="resetGame()">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù„Ø¹Ø¨</button>
`;
}

/* Ø¥Ø¹Ø§Ø¯Ø© */
function resetGame(){
localStorage.clear();
location.reload();
}

renderMap();
</script>

</body>
</html>
